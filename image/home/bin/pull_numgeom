#!/bin/bash

NGHOME=$DOCKER_HOME/numgeom

if [ -e "$NGHOME/.git" ]
then
    echo "NumGeom was already cloned. Pulling from repository"

    cd $NGHOME
    git pull
else
    # Remove octave-workspace if it exists
    rm -f $NGHOME/octave-workspace

    git clone --depth 10 --no-single-branch git@bitbucket.org:numgeom/numgeom.git $NGHOME
fi

cd $NGHOME
if [ -n "$1" -a "$1" != "$(git log --pretty=oneline --abbrev-commit --abbrev=7 -n 1)" ]
then
    git checkout $1
fi
